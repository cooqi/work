<!DOCTYPE html>
<html lang="en">
<head>
	 <meta content="yes" name="apple-mobile-web-app-capable">
 <meta content="yes" name="apple-touch-fullscreen">
 <meta content="telephone=no,email=no" name="format-detection">
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta name="keywords" content="coqoi"/>
 <title>安全保障--钱婆婆手机版</title>
 <!-- 忽略页面中的数字识别为电话，忽略email识别 -->
 <meta name="format-detection" content="telphone=no, email=no"/>
 <!-- 启用360浏览器的极速模式(webkit) -->
 <meta name="renderer" content="webkit">
 <!-- 避免IE使用兼容模式 -->
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <!-- 不让百度转码 -->
 <meta http-equiv="Cache-Control" content="no-siteapp" />
 <!--隱藏底部 iPhone button bar-->
 <meta name="apple-mobile-web-app-capable" content="yes">
<!--icon图标-->
 <link rel="apple-touch-icon" sizes="114x114" href="" />
<!--定义loading图片-->
 <link rel="apple-touch-startup-image" href="/startup.png">
 <script type="text/javascript" src="js/jquery-1.8.0.min.js" ></script>
 <!--flexible为手机自适应的js插件-->
 <script type="text/javascript" src="js/flexible.js" ></script>
 <script type="text/javascript" src="js/flexible_css.js" ></script>

 <script type="text/javascript" src="js/jquery.showMore.js"></script>

 <link href="css/m_style.css" type="text/css" rel="stylesheet">
</head>
<body>
 <div class="object-head fqa_head">
    <img src="images/back.png" alt="" class="object-back" onclick='history.go(-1)'>
     <p>基本设置</p>

     <!--方案一-->
     <div class="nav_icon input-set"><img src="images/moreinput.svg" alt="" class="showinput"></div>
     <!--方案一-->

 </div>

<!--地址-->
    <script type="text/javascript" src="js/dialog.js"></script>
    <script type="text/javascript" src="js/mobile-select-area.js"></script>
<!--地址-->

<!--年龄-->
  <script src="js/mobiscroll_002.js" type="text/javascript"></script>
  <script src="js/mobiscroll_004.js" type="text/javascript"></script>
  <link href="css/mobiscroll_002.css" rel="stylesheet" type="text/css">
  <link href="css/mobiscroll.css" rel="stylesheet" type="text/css">
  <script src="js/mobiscroll.js" type="text/javascript"></script>
  <script src="js/mobiscroll_003.js" type="text/javascript"></script>
  <script src="js/mobiscroll_005.js" type="text/javascript"></script>
  <link href="css/mobiscroll_003.css" rel="stylesheet" type="text/css">
<!--年龄--> 


<div class="base-set">
  <form action="">
   <div class="headimg">
         <div class="half">
          <a class="logo" id="logox">
            <img id="bgl" src="images/head_portrait.png"/><!--//默认头像
            //如果用户没有设置头像，则头像是系统默认显示的图片
            //如果用户修改头像，则之前设置的头像将会移除，新上传的图片显示-->
          </a>
          <div id="view"></div><!--//新头像显示区域-->
         </div>

    <article class="htmleaf-container">
      <div id="clipArea"></div>
       <div class="foot-use">
        <div class="uploader1 blue">
            <input type="button" name="file" class="button" value="打开"/>
            <input id="file" type="file" onchange="javascript:setImagePreview();" accept="image/*" multiple  />
        </div>

        <span id="clipBtn">截取</span>
        <span id="closeBtn">取消</span>
       </div>
     </article>

   </div><!--头像-->

    <ul class="base-information">
      <li><span>真实姓名</span><input type="text" value="" placeholder="填写真实姓名"></li>
      <li><span>性别</span>
      <select name="" id="sex">
        <option value="">请选择</option>
        <option value="男">男</option>
        <option value="女">女</option>
      </select>
      </li>
      <li><span>生日</span><input type="text" name="appDate" id="appDate" value="" placeholder="请填写生日"></li>
      <li><span>婚否</span>
      <select name="" id="marry">
        <option value="">请选择</option>
        <option value="已婚">已婚</option>
        <option value="未婚">未婚</option>
      </select>
      </li>
      <li><span>职业</span><input type="text" value=""  placeholder="请填写职业"></li>
      <li><span>所在地</span><input type="text" value="" id="txt_area" placeholder="请选择您的所在地"><input type="hidden" id="hd_area"/>
      </li>
    </ul>

    <ul class="cer-information">
      <!--给需要隐藏的选项加上hide的class-->
      <li class="hide"><span>微信</span><input type="text"  value="" placeholder="请填写微信号"></li>
      <li class="hide"><span>QQ</span><input type="number" min="5" max="15" value="" placeholder="请填写QQ号"></li>
      <li class="certification cre-email"><span>邮箱</span><input type="email" name="email" value="" placeholder="请认证邮箱" readonly="readonly"><span class="cre-tip">未认证</span></li><!--不可修改,如果认证了则给li标签加上cre-have的class,并给input加上disabled，把提示文字改为‘已认证’;-->
      <li class="certification cre-id"><span>身份证号</span><input type="text" value="" name="idnumber" placeholder="请认证身份证" readonly="readonly"><span class="cre-tip">未认证</span></li><!--不可修改，默认样式为未认证样式-->
      <li class="certification cre-phone"><span>手机号</span><input type="text" name="phone" value="" placeholder="请认证手机号" readonly="readonly"><span class="cre-tip">未认证</span></li><!--此处手机号是可修改的-->
    </ul>

    <ul class="key-set">
      <li class="keyset"><span>登录密码</span><input type="password" name="login-key" value="123" placeholder="请设置登录密码" readonly="readonly"><span class="set-tip">修改密码</span></li>
      <li class="keyset paykey"><span>支付密码</span><input type="password" name="pay-key" value="" placeholder="请设置密码" readonly="readonly"><span class="set-tip">未设置</span></li><!--如果已设置则给li标签加上keyset-have的class ,默认未为设置样式-->
    </ul>

    <!--方案二-->
    <div class="showinput2"></div>
    <!--方案二-->

    <input type="submit" value="保存" class="base-set-submit">



    <!--认证弹出框-->
    <div class="pop-up cre-email-info" style="display: none">
      <div class="box-info">
        <input type="text" name="cre-email-info" placeholder="输入您的邮箱">
        <div class="verification-code">
          <input type="text" placeholder="输入验证码"><span>获取验证码</span>
        </div>
        <dl>
          <dd><span class="cancel">取消</span></dd>
          <dd><span class="det">完成</span></dd>
        </dl>
      </div>
    </div>

    <div class="pop-up cre-id-info" style="display: none">
      <div class="box-info">
       <input type="text" name="idNo" placeholder="请输入您的身份证号">
       <input type="text" name="re-idNo" placeholder="请再次输入您的身份证号">
       <dl>
          <dd><span class="cancel">取消</span></dd>
          <dd><span class="det">完成</span></dd>
        </dl>
      </div>
    </div>

    <div class="pop-up cre-phone-info" style="display: none">
      <div class="box-info">
       <input type="text" placeholder="输入您的手机号" name="cre-phone-info">
        <div class="verification-code"> 
          <input type="text" placeholder="输入验证码"><span>获取验证码</span>
        </div>
        <dl>
          <dd><span class="cancel">取消</span></dd>
          <dd><span class="det">完成</span></dd>
        </dl>
      </div>
    </div>


    <!--密码修改弹出框-->
    <div class="pop-up login-key" style="display: none">
      <div class="box-info">
       <input type="text" placeholder="输入原来的登录密码" name="login-old-key">
       <input type="text" placeholder="输入新的登录密码" name="login-new-key">
       <input type="text" placeholder="再次确认新的登录密码" name="re-login-new-key">
       <dl>
          <dd><span class="cancel">取消</span></dd>
          <dd><span class="det">完成</span></dd>
        </dl>
      </div>
    </div>

    <div class="pop-up pay-key" style="display: none">
      <div class="box-info">
       <input type="text" placeholder="输入您的支付密码" name="pay-key-password">
       <input type="text" placeholder="再次输入您的支付密码" name="re-pay-key">
       <input type="text" placeholder="输入您认证的手机号" name="pay-key-phone">
       <div class="verification-code">
          <input type="text" placeholder="输入验证码"><span>获取验证码</span>
        </div>
       <dl>
          <dd><span class="cancel">取消</span></dd>
          <dd><span class="det">完成</span></dd>
        </dl>
      </div>
    </div>

  </form>


 <!--头像-->
<link href="css/headimgstyle.css" rel="stylesheet" type="text/css">
<script src="js/iscroll-zoom.js"></script>
<script src="js/hammer.js"></script>
<script src="js/jquery.photoClip.js"></script>

<script>
    var obUrl = ''
    //document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    $("#clipArea").photoClip({
        width: 200,
        height: 200,
        file: "#file",
        view: "#view",
        ok: "#clipBtn",
        loadStart: function() {
            console.log("照片读取中");
        },
        loadComplete: function() {
            console.log("照片读取完成");
        },
        clipFinish: function(dataURL) {
            console.log(dataURL);
        }
    });
</script>
<script>
    $(function(){
      /*var content=document.getElementById('logox');
      var contents = document.querySelector(".htmleaf-container");
      content.addEventListener("touchend", function(){
     contents.style.display = "block";
});*/
$("#logox").click(function(){
    $(".htmleaf-container").show();
})

        $("#clipBtn").click(function(){
            $("#logox").empty();
            $(".htmleaf-container").hide();
        })

        $("#closeBtn").click(function(){          
            $(".htmleaf-container").hide();
        })
    });
</script>

<script type="text/javascript">
    function setImagePreview() {
        var preview, img_txt, localImag, file_head = document.getElementById("file_head"),
                picture = file_head.value;
        if (!picture.match(/.jpg|.gif|.png|.bmp/i)) return alert("您上传的图片格式不正确，请重新选择！"),
                !1;
        if (preview = document.getElementById("preview"), file_head.files && file_head.files[0]) preview.style.display = "block",
                preview.style.width = "63px",
                preview.style.height = "63px",
                preview.src = window.navigator.userAgent.indexOf("Chrome") >= 1 || window.navigator.userAgent.indexOf("Safari") >= 1 ? window.webkitURL.createObjectURL(file_head.files[0]) : window.URL.createObjectURL(file_head.files[0]);
        else {
            file_head.select(),
                    file_head.blur(),
                    img_txt = document.selection.createRange().text,
                    localImag = document.getElementById("localImag"),
                    localImag.style.width = "63px",
                    localImag.style.height = "63px";
            try {
                localImag.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",
                        localImag.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = img_txt
            } catch(f) {
                return alert("您上传的图片格式不正确，请重新选择！"),
                        !1
            }
            preview.style.display = "none",
                    document.selection.empty()
        }
        return document.getElementById("DivUp").style.display = "block",
                !0
    }
</script>
<!--头像-->



   <script>
   //地址
    var selectArea = new MobileSelectArea();
    selectArea.init({trigger:'#txt_area',value:$('#hd_area').val(),data:'data.json'});
    </script>

  <script type="text/javascript">
  //生日
        $(function () {
      var currYear = (new Date()).getFullYear();  
      var opt={};
      opt.date = {preset : 'date'};
      opt.datetime = {preset : 'datetime'};
      opt.time = {preset : 'time'};
      opt.default = {
        theme: 'android-ics light', 
            display: 'modal', //显示方式 
            mode: 'scroller', //日期选择模式
        dateFormat: 'yyyy-mm-dd',
        lang: 'zh',
        showNow: true,
        nowText: " ",
            startYear: currYear - 100, //开始年份
            endYear: currYear + 1 //结束年份
      };

        $("#appDate").mobiscroll($.extend(opt['date'], opt['default']));
        var optDateTime = $.extend(opt['datetime'], opt['default']);
        var optTime = $.extend(opt['time'], opt['default']);
        

        });
    </script>

    <script>
    /**select**/
    $('#marry').blur(function(){
      var marry = $(this).val();
      if(marry!=''){
        $('#marry').css('color','#58595b');
        console.log(marry)
      }
    })
      
      $('#sex').blur(function(){
        var sex = $(this).val();
      if(sex!=''){
        $('#sex').css('color','#58595b')
      }
       })



      /************弹出框****************/
      $(function () {
        /***认证***/
      $('input[name="email"]').click(function(){
             $('.cre-email-info').show()
      })
      $('input[name="idnumber"]').click(function(){
             $('.cre-id-info').show()
      })
      $('input[name="phone"]').click(function(){
             $('.cre-phone-info').show()
      })

      //邮箱认证
      if($('input[name="email"]').val()!=''){
        $('.cre-email').addClass("cre-have");
        $('input[name="email"]').attr('disabled','disabled');
        $('.cre-email .cre-tip').html('已认证');
      }

       $('.cre-email-info span.det').click(function(){
          var creEmail=$('input[name="cre-email-info"]').val();
          if(creEmail==''){
            alert('请输入您要认证的邮箱')
          }else{
          var boo=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(creEmail);
          if(boo==false){
          alert('请输入正确的邮箱地址！');
          }else{
                 //此处还需要认证邮箱的验证码，得到返回值再来判断
                 //因为设计阶段没有返回数据，暂时忽略此处验证
                    $('input[name="email"]').val(creEmail);
                    $('.cre-email-info').hide();
                    $('.cre-email').addClass("cre-have");
                    $('input[name="email"]').attr('disabled','disabled');
                    $('.cre-email .cre-tip').html('已认证');
          }
          }
       })


      //身份证认证
      if($('input[name="idnumber"]').val()!=''){
        $('.cre-id').addClass("cre-have");
        $('input[name="idnumber"]').attr('disabled','disabled');
        $('.cre-id .cre-tip').html('已认证');
      }
      $('.cre-id-info span.det').click(function(){
        var idcard=$('input[name="idNo"]').val();
        var reidcard=$('input[name="re-idNo"]').val();
             if(idcard==''){
              alert('请输入您的身份证号')
             }else{
              var bo=/^(\d{6})(18|19|20)?(\d{2})([01]\d)([0123]\d)(\d{3})(\d|X)?$/.test(idcard);
              var idyear = idcard. substr(6,4);
              var idmonth = idcard. substr(10,2);
              var idday = idcard. substr(12,2);
              if(bo==false||idmonth>12||idday>31){
              alert('请输入正确的身份证号码！');
              return false;
              }else{
                if(reidcard==''){
                  alert('请再次输入您的身份证号');
                }else{
                  if(reidcard!=idcard){
                    alert('两次输入的身份证号不一致，请确认您的身份证号');
                  }else if(reidcard==idcard){
                    $('input[name="idnumber"]').val(idcard);
                    $('.cre-id-info').hide();
                    $('.cre-id').addClass("cre-have");
                    $('input[name="idnumber"]').attr('disabled','disabled');
                    $('.cre-id .cre-tip').html('已认证');
                  }
                }
              }
             }             
      })
      
      
      //手机认证
      if($('input[name="phone"]').val()!=''){
        $('.cre-phone').addClass("cre-have");
        $('.cre-phone .cre-tip').html('修改');
      }

      $('.cre-phone-info span.det').click(function(){
          var crephone=$('input[name="cre-phone-info"]').val();
          if(crephone==''){
            alert('请输入您要认证的手机号')
          }else{
          var bophone=/^1[3|4|5|8]\d{9}$/.test(crephone);
          if(bophone==false){
          alert('请输入正确的手机号！');
          }else{
                 //此处还需要认证手机的验证码，得到返回值再来判断
                 //因为设计阶段没有返回数据，暂时忽略此处验证
                    $('input[name="phone"]').val(crephone);
                    $('.cre-phone-info').hide();
                    $('.cre-phone').addClass("cre-have");
                    $('.cre-phone .cre-tip').html('修改');
          }
          }
       })



       /***密码设置***/
      $('input[name="login-key"]').click(function(){
             $('.login-key').show()
      })
      $('input[name="pay-key"]').click(function(){
             $('.pay-key').show()
      })
      

      /***取消确定***/
      $('span.cancel').click(function(){
             $(this).parents('.pop-up').hide();
      })//取消，关闭弹出框


      })

      //登录密码
      $('.login-key span.det').click(function(){
        var loginkey=$('input[name="login-key"]').val();
        var oldkey=$('input[name="login-old-key"]').val();
        var newkey=$('input[name="login-new-key"]').val();
        var reNewkey=$('input[name="re-login-new-key"]').val();
        
        if(oldkey==''){
          alert('请输入您的原始登录密码')
        }else{
          if(loginkey!=oldkey){
            alert('您输入的原始密码错误，请确认您的密码')
          }else{
            if(newkey==''){
              alert('请输入您最新的登录密码')
            }else{
              if(newkey==oldkey){
                alert('最新密码不能和原始密码一样，请重新设置')
              }else{
                 var regExnewkey = /^[a-zA-Z0-9_]{6,16}$/.test(newkey);
                 if(regExnewkey==false){
                  alert('登录密码只能是6-16个字母、数字、下划线')
                 }else{
                  if(newkey!=reNewkey){
                     alert('两次输入的新密码不一致，请重新设置')
                  }else{
                    $('input[name="login-key"]').val(newkey);
                    $('.login-key').hide();
                  }
                 }
              }
            }
          }
        }
      })

     //支付密码
      if($('input[name="pay-key"]').val()!=''){
        $('.paykey .set-tip').html('修改密码');
      }
       $('.pay-key span.det').click(function(){
           var keyphone=$('input[name="phone"]').val();
           var paykey=$('input[name="pay-key-password"]').val();
           console.log(paykey);
           var repaykey=$('input[name="re-pay-key"]').val();
           var paykeyphone=$('input[name="pay-key-phone"]').val();

           if(keyphone==''){
                      alert('请先认证您的手机号')
                    }else{
                      if(paykey==''){
                       alert('请输入您的支付密码')
                      }else{
                       var regExpaykey = /^[a-zA-Z0-9_]{6,16}$/.test(paykey);
                       if(regExpaykey==false){
                             alert('支付密码只能是6-16个字母、数字、下划线')
                             }else{
                             if(repaykey==''){
                                 alert('请再次输入您的支付密码')
                              }else{
                                if(paykey!=repaykey){
                                  alert('两次输入的支付密码不一致，请重新设置')
                                }else{
                                  if(paykeyphone==''){
                                    alert('请输入您认证过的手机号')
                                  }else{
                                    if(keyphone!=paykeyphone){
                                    alert('您输入的手机号和您认证的手机号不一致，请确认后重新输入')
                                  }else{
                                   //此处还需要认证手机的验证码，得到返回值再来判断
                                   //因为设计阶段没有返回数据，暂时忽略此处验证
                                   $('input[name="pay-key"]').val(paykey);
                                   $('.paykey .set-tip').html('修改密码');
                                   $('.pay-key').hide();
                                  }
                                  }
                                }
                              }
                             }
                            }
                    }

           
           
       })

    </script>


<style>
  
  .hide{display: none;}/*方案一二均需要的样式*/


  /*方案一*/
  img.showinput{display: block;cursor: pointer;width: .8rem;height: .8rem;margin-top: .3rem;}
  .fqa_head .input-set{top:0;}


  /*方案二*/
  .showinput2{width: 100%;height: .5rem;background:url(images/downshow.svg) no-repeat center center #ddd;background-size: .4rem .4rem;}
  .uphide{background:url(images/uphide.svg) no-repeat center center #ddd;background-size: .4rem .4rem;}
  .base-set ul.key-set{margin-bottom: 0}
  input.base-set-submit{margin-top:1.2rem;}

</style>
<script>
//方案一
  $('img.showinput').click(function(){
    $('.hide').slideToggle();
  })

  //方案二
    $('.showinput2').click(function(){
    $('.hide').slideToggle();
    $(this).toggleClass('uphide');
  })
</script>
</div>
    
</body>
</html>